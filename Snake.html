<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Play Snake</title>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #02011d;
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
        }

        canvas {
            border: 2px solid #08f3e7;
            background-color: #02011d;
            margin-top: 20px;
        }

        section {
            text-align: center;
            margin-top: 20px;
        }

        h2 {
            font-size: 30px;
            color: #08f3e7;
            font-weight: bold;
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #08f3e7; /* Warna biru */
            color: #111;
            border: none;
            cursor: pointer;
            margin-top: 10px;
            border-radius: 5px;
            transition: background-color 0.3s ease-in-out;
        }

        button:hover {
            background-color: #0d8ce7; /* Warna biru yang sedikit lebih gelap saat hover */
        }
    </style>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap">
</head>

<body>

    <section>
        <h2>Play Snake</h2>
    </section>

    <canvas id="snakeCanvas" width="400" height="400"></canvas>

    <button onclick="logout()">Kembali</button>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const canvas = document.getElementById('snakeCanvas');
            const ctx = canvas.getContext('2d');

            const gridSize = 20;
            const snake = [{ x: 10, y: 10 }];
            let direction = 'right';
            let food = getRandomFood();
            let score = 0;

            function getRandomFood() {
                const x = Math.floor(Math.random() * (canvas.width / gridSize));
                const y = Math.floor(Math.random() * (canvas.height / gridSize));
                return { x, y };
            }

            function drawSnake() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = '#08f3e7';
                snake.forEach(segment => {
                    ctx.fillRect(segment.x * gridSize, segment.y * gridSize, gridSize, gridSize);
                });
            }

            function drawFood() {
                ctx.fillStyle = '#ff6347';
                ctx.fillRect(food.x * gridSize, food.y * gridSize, gridSize, gridSize);
            }

            function drawScore() {
                ctx.fillStyle = '#fff';
                ctx.font = '20px Poppins';
                ctx.fillText('Score: ' + score, 10, 30);
            }

            function checkCollision() {
                const head = snake[0];
                if (head.x < 0 || head.x >= canvas.width / gridSize || head.y < 0 || head.y >= canvas.height / gridSize) {
                    return true; // Collision with walls
                }

                for (let i = 1; i < snake.length; i++) {
                    if (head.x === snake[i].x && head.y === snake[i].y) {
                        return true; // Collision with itself
                    }
                }

                return false;
            }

            function update() {
                const head = Object.assign({}, snake[0]);

                switch (direction) {
                    case 'up':
                        head.y--;
                        break;
                    case 'down':
                        head.y++;
                        break;
                    case 'left':
                        head.x--;
                        break;
                    case 'right':
                        head.x++;
                        break;
                }

                snake.unshift(head);

                if (head.x === food.x && head.y === food.y) {
                    food = getRandomFood();
                    score += 10;
                } else {
                    snake.pop();
                }

                if (checkCollision()) {
                    alert('Game Over! Score: ' + score);
                    resetGame();
                }

                drawSnake();
                drawFood();
                drawScore();
            }

            function resetGame() {
                snake.length = 1;
                snake[0] = { x: 10, y: 10 };
                direction = 'right';
                food = getRandomFood();
                score = 0;
            }

            document.addEventListener('keydown', function (event) {
                switch (event.key) {
                    case 'ArrowUp':
                        if (direction !== 'down') direction = 'up';
                        break;
                    case 'ArrowDown':
                        if (direction !== 'up') direction = 'down';
                        break;
                    case 'ArrowLeft':
                        if (direction !== 'right') direction = 'left';
                        break;
                    case 'ArrowRight':
                        if (direction !== 'left') direction = 'right';
                        break;
                }
            });

            setInterval(update, 150); // Game loop
        });

        function logout() {
            alert('Kembali berhasil');
            window.location.href = "myProjects.html";
        }
    </script>

</body>

</html>
